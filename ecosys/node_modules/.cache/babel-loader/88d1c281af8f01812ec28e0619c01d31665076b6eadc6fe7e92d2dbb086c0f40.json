{"ast":null,"code":"import { Util } from 'leaflet';\nimport { RasterLayer } from './RasterLayer';\nimport { getUrlParams } from '../Util';\nimport mapService from '../Services/MapService';\nexport var DynamicMapLayer = RasterLayer.extend({\n  options: {\n    updateInterval: 150,\n    layers: false,\n    layerDefs: false,\n    timeOptions: false,\n    format: 'png32',\n    transparent: true,\n    f: 'json'\n  },\n  initialize: function (options) {\n    options = getUrlParams(options);\n    this.service = mapService(options);\n    this.service.addEventParent(this);\n    Util.setOptions(this, options);\n  },\n  getDynamicLayers: function () {\n    return this.options.dynamicLayers;\n  },\n  setDynamicLayers: function (dynamicLayers) {\n    this.options.dynamicLayers = dynamicLayers;\n    this._update();\n    return this;\n  },\n  getLayers: function () {\n    return this.options.layers;\n  },\n  setLayers: function (layers) {\n    this.options.layers = layers;\n    this._update();\n    return this;\n  },\n  getLayerDefs: function () {\n    return this.options.layerDefs;\n  },\n  setLayerDefs: function (layerDefs) {\n    this.options.layerDefs = layerDefs;\n    this._update();\n    return this;\n  },\n  getTimeOptions: function () {\n    return this.options.timeOptions;\n  },\n  setTimeOptions: function (timeOptions) {\n    this.options.timeOptions = timeOptions;\n    this._update();\n    return this;\n  },\n  query: function () {\n    return this.service.query();\n  },\n  identify: function () {\n    return this.service.identify();\n  },\n  find: function () {\n    return this.service.find();\n  },\n  _getPopupData: function (e) {\n    var callback = Util.bind(function (error, featureCollection, response) {\n      if (error) {\n        return;\n      } // we really can't do anything here but authenticate or requesterror will fire\n      setTimeout(Util.bind(function () {\n        this._renderPopup(e.latlng, error, featureCollection, response);\n      }, this), 300);\n    }, this);\n    var identifyRequest;\n    if (this.options.popup) {\n      identifyRequest = this.options.popup.on(this._map).at(e.latlng);\n    } else {\n      identifyRequest = this.identify().on(this._map).at(e.latlng);\n    }\n\n    // remove extraneous vertices from response features if it has not already been done\n    if (!identifyRequest.params.maxAllowableOffset) {\n      identifyRequest.simplify(this._map, 0.5);\n    }\n    if (!(this.options.popup && this.options.popup.params && this.options.popup.params.layers)) {\n      if (this.options.layers) {\n        identifyRequest.layers('visible:' + this.options.layers.join(','));\n      } else {\n        identifyRequest.layers('visible');\n      }\n    }\n\n    // if present, pass layer ids and sql filters through to the identify task\n    if (this.options.layerDefs && typeof this.options.layerDefs !== 'string' && !identifyRequest.params.layerDefs) {\n      for (var id in this.options.layerDefs) {\n        if (Object.prototype.hasOwnProperty.call(this.options.layerDefs, id)) {\n          identifyRequest.layerDef(id, this.options.layerDefs[id]);\n        }\n      }\n    }\n    identifyRequest.run(callback);\n\n    // set the flags to show the popup\n    this._shouldRenderPopup = true;\n    this._lastClick = e.latlng;\n  },\n  _buildExportParams: function () {\n    var sr = parseInt(this._map.options.crs.code.split(':')[1], 10);\n    var params = {\n      bbox: this._calculateBbox(),\n      size: this._calculateImageSize(),\n      dpi: 96,\n      format: this.options.format,\n      transparent: this.options.transparent,\n      bboxSR: sr,\n      imageSR: sr\n    };\n    if (this.options.dynamicLayers) {\n      params.dynamicLayers = this.options.dynamicLayers;\n    }\n    if (this.options.layers) {\n      if (this.options.layers.length === 0) {\n        return;\n      } else {\n        params.layers = 'show:' + this.options.layers.join(',');\n      }\n    }\n    if (this.options.layerDefs) {\n      params.layerDefs = typeof this.options.layerDefs === 'string' ? this.options.layerDefs : JSON.stringify(this.options.layerDefs);\n    }\n    if (this.options.timeOptions) {\n      params.timeOptions = JSON.stringify(this.options.timeOptions);\n    }\n    if (this.options.from && this.options.to) {\n      params.time = this.options.from.valueOf() + ',' + this.options.to.valueOf();\n    }\n    if (this.service.options.token) {\n      params.token = this.service.options.token;\n    }\n    if (this.options.proxy) {\n      params.proxy = this.options.proxy;\n    }\n\n    // use a timestamp to bust server cache\n    if (this.options.disableCache) {\n      params._ts = Date.now();\n    }\n    return params;\n  },\n  _requestExport: function (params, bounds) {\n    if (this.options.f === 'json') {\n      this.service.request('export', params, function (error, response) {\n        if (error) {\n          return;\n        } // we really can't do anything here but authenticate or requesterror will fire\n\n        if (this.options.token && response.href) {\n          response.href += '?token=' + this.options.token;\n        }\n        if (this.options.proxy && response.href) {\n          response.href = this.options.proxy + '?' + response.href;\n        }\n        if (response.href) {\n          this._renderImage(response.href, bounds);\n        } else {\n          this._renderImage(response.imageData, bounds, response.contentType);\n        }\n      }, this);\n    } else {\n      params.f = 'image';\n      var fullUrl = this.options.url + 'export' + Util.getParamString(params);\n      if (this.options.proxy) {\n        fullUrl = this.options.proxy + '?' + fullUrl;\n      }\n      this._renderImage(fullUrl, bounds);\n    }\n  }\n});\nexport function dynamicMapLayer(url, options) {\n  return new DynamicMapLayer(url, options);\n}\nexport default dynamicMapLayer;","map":{"version":3,"names":["Util","RasterLayer","getUrlParams","mapService","DynamicMapLayer","extend","options","updateInterval","layers","layerDefs","timeOptions","format","transparent","f","initialize","service","addEventParent","setOptions","getDynamicLayers","dynamicLayers","setDynamicLayers","_update","getLayers","setLayers","getLayerDefs","setLayerDefs","getTimeOptions","setTimeOptions","query","identify","find","_getPopupData","e","callback","bind","error","featureCollection","response","setTimeout","_renderPopup","latlng","identifyRequest","popup","on","_map","at","params","maxAllowableOffset","simplify","join","id","Object","prototype","hasOwnProperty","call","layerDef","run","_shouldRenderPopup","_lastClick","_buildExportParams","sr","parseInt","crs","code","split","bbox","_calculateBbox","size","_calculateImageSize","dpi","bboxSR","imageSR","length","JSON","stringify","from","to","time","valueOf","token","proxy","disableCache","_ts","Date","now","_requestExport","bounds","request","href","_renderImage","imageData","contentType","fullUrl","url","getParamString","dynamicMapLayer"],"sources":["E:/Working/IP_proj/EcosystemCivi/ecosys/node_modules/esri-leaflet/src/Layers/DynamicMapLayer.js"],"sourcesContent":["import { Util } from 'leaflet';\r\nimport { RasterLayer } from './RasterLayer';\r\nimport { getUrlParams } from '../Util';\r\nimport mapService from '../Services/MapService';\r\n\r\nexport var DynamicMapLayer = RasterLayer.extend({\r\n\r\n  options: {\r\n    updateInterval: 150,\r\n    layers: false,\r\n    layerDefs: false,\r\n    timeOptions: false,\r\n    format: 'png32',\r\n    transparent: true,\r\n    f: 'json'\r\n  },\r\n\r\n  initialize: function (options) {\r\n    options = getUrlParams(options);\r\n    this.service = mapService(options);\r\n    this.service.addEventParent(this);\r\n\r\n    Util.setOptions(this, options);\r\n  },\r\n\r\n  getDynamicLayers: function () {\r\n    return this.options.dynamicLayers;\r\n  },\r\n\r\n  setDynamicLayers: function (dynamicLayers) {\r\n    this.options.dynamicLayers = dynamicLayers;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  getLayers: function () {\r\n    return this.options.layers;\r\n  },\r\n\r\n  setLayers: function (layers) {\r\n    this.options.layers = layers;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  getLayerDefs: function () {\r\n    return this.options.layerDefs;\r\n  },\r\n\r\n  setLayerDefs: function (layerDefs) {\r\n    this.options.layerDefs = layerDefs;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  getTimeOptions: function () {\r\n    return this.options.timeOptions;\r\n  },\r\n\r\n  setTimeOptions: function (timeOptions) {\r\n    this.options.timeOptions = timeOptions;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  query: function () {\r\n    return this.service.query();\r\n  },\r\n\r\n  identify: function () {\r\n    return this.service.identify();\r\n  },\r\n\r\n  find: function () {\r\n    return this.service.find();\r\n  },\r\n\r\n  _getPopupData: function (e) {\r\n    var callback = Util.bind(function (error, featureCollection, response) {\r\n      if (error) { return; } // we really can't do anything here but authenticate or requesterror will fire\r\n      setTimeout(Util.bind(function () {\r\n        this._renderPopup(e.latlng, error, featureCollection, response);\r\n      }, this), 300);\r\n    }, this);\r\n\r\n    var identifyRequest;\r\n    if (this.options.popup) {\r\n      identifyRequest = this.options.popup.on(this._map).at(e.latlng);\r\n    } else {\r\n      identifyRequest = this.identify().on(this._map).at(e.latlng);\r\n    }\r\n\r\n    // remove extraneous vertices from response features if it has not already been done\r\n    if (!identifyRequest.params.maxAllowableOffset) {\r\n      identifyRequest.simplify(this._map, 0.5);\r\n    }\r\n\r\n    if (!(this.options.popup && this.options.popup.params && this.options.popup.params.layers)) {\r\n      if (this.options.layers) {\r\n        identifyRequest.layers('visible:' + this.options.layers.join(','));\r\n      } else {\r\n        identifyRequest.layers('visible');\r\n      }\r\n    }\r\n\r\n    // if present, pass layer ids and sql filters through to the identify task\r\n    if (this.options.layerDefs && typeof this.options.layerDefs !== 'string' && !identifyRequest.params.layerDefs) {\r\n      for (var id in this.options.layerDefs) {\r\n        if (Object.prototype.hasOwnProperty.call(this.options.layerDefs, id)) {\r\n          identifyRequest.layerDef(id, this.options.layerDefs[id]);\r\n        }\r\n      }\r\n    }\r\n\r\n    identifyRequest.run(callback);\r\n\r\n    // set the flags to show the popup\r\n    this._shouldRenderPopup = true;\r\n    this._lastClick = e.latlng;\r\n  },\r\n\r\n  _buildExportParams: function () {\r\n    var sr = parseInt(this._map.options.crs.code.split(':')[1], 10);\r\n\r\n    var params = {\r\n      bbox: this._calculateBbox(),\r\n      size: this._calculateImageSize(),\r\n      dpi: 96,\r\n      format: this.options.format,\r\n      transparent: this.options.transparent,\r\n      bboxSR: sr,\r\n      imageSR: sr\r\n    };\r\n\r\n    if (this.options.dynamicLayers) {\r\n      params.dynamicLayers = this.options.dynamicLayers;\r\n    }\r\n\r\n    if (this.options.layers) {\r\n      if (this.options.layers.length === 0) {\r\n        return;\r\n      } else {\r\n        params.layers = 'show:' + this.options.layers.join(',');\r\n      }\r\n    }\r\n\r\n    if (this.options.layerDefs) {\r\n      params.layerDefs = typeof this.options.layerDefs === 'string' ? this.options.layerDefs : JSON.stringify(this.options.layerDefs);\r\n    }\r\n\r\n    if (this.options.timeOptions) {\r\n      params.timeOptions = JSON.stringify(this.options.timeOptions);\r\n    }\r\n\r\n    if (this.options.from && this.options.to) {\r\n      params.time = this.options.from.valueOf() + ',' + this.options.to.valueOf();\r\n    }\r\n\r\n    if (this.service.options.token) {\r\n      params.token = this.service.options.token;\r\n    }\r\n\r\n    if (this.options.proxy) {\r\n      params.proxy = this.options.proxy;\r\n    }\r\n\r\n    // use a timestamp to bust server cache\r\n    if (this.options.disableCache) {\r\n      params._ts = Date.now();\r\n    }\r\n\r\n    return params;\r\n  },\r\n\r\n  _requestExport: function (params, bounds) {\r\n    if (this.options.f === 'json') {\r\n      this.service.request('export', params, function (error, response) {\r\n        if (error) { return; } // we really can't do anything here but authenticate or requesterror will fire\r\n\r\n        if (this.options.token && response.href) {\r\n          response.href += ('?token=' + this.options.token);\r\n        }\r\n        if (this.options.proxy && response.href) {\r\n          response.href = this.options.proxy + '?' + response.href;\r\n        }\r\n        if (response.href) {\r\n          this._renderImage(response.href, bounds);\r\n        } else {\r\n          this._renderImage(response.imageData, bounds, response.contentType);\r\n        }\r\n      }, this);\r\n    } else {\r\n      params.f = 'image';\r\n      var fullUrl = this.options.url + 'export' + Util.getParamString(params);\r\n      if (this.options.proxy) {\r\n        fullUrl = this.options.proxy + '?' + fullUrl;\r\n      }\r\n      this._renderImage(fullUrl, bounds);\r\n    }\r\n  }\r\n});\r\n\r\nexport function dynamicMapLayer (url, options) {\r\n  return new DynamicMapLayer(url, options);\r\n}\r\n\r\nexport default dynamicMapLayer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}