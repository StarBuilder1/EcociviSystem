{"ast":null,"code":"import { Service } from './Service';\nimport query from '../Tasks/Query';\nimport { geojsonToArcGIS } from '../Util';\nexport var FeatureLayerService = Service.extend({\n  options: {\n    idAttribute: 'OBJECTID'\n  },\n  query: function () {\n    return query(this);\n  },\n  addFeature: function (feature, callback, context) {\n    this.addFeatures(feature, callback, context);\n  },\n  addFeatures: function (features, callback, context) {\n    var featuresArray = features.features ? features.features : [features];\n    for (var i = featuresArray.length - 1; i >= 0; i--) {\n      delete featuresArray[i].id;\n    }\n    features = geojsonToArcGIS(features);\n    features = featuresArray.length > 1 ? features : [features];\n    return this.post('addFeatures', {\n      features: features\n    }, function (error, response) {\n      // For compatibility reason with former addFeature function,\n      // we return the object in the array and not the array itself\n      var result = response && response.addResults ? response.addResults.length > 1 ? response.addResults : response.addResults[0] : undefined;\n      if (callback) {\n        callback.call(context, error || response.addResults[0].error, result);\n      }\n    }, context);\n  },\n  updateFeature: function (feature, callback, context) {\n    this.updateFeatures(feature, callback, context);\n  },\n  updateFeatures: function (features, callback, context) {\n    var featuresArray = features.features ? features.features : [features];\n    features = geojsonToArcGIS(features, this.options.idAttribute);\n    features = featuresArray.length > 1 ? features : [features];\n    return this.post('updateFeatures', {\n      features: features\n    }, function (error, response) {\n      // For compatibility reason with former updateFeature function,\n      // we return the object in the array and not the array itself\n      var result = response && response.updateResults ? response.updateResults.length > 1 ? response.updateResults : response.updateResults[0] : undefined;\n      if (callback) {\n        callback.call(context, error || response.updateResults[0].error, result);\n      }\n    }, context);\n  },\n  deleteFeature: function (id, callback, context) {\n    this.deleteFeatures(id, callback, context);\n  },\n  deleteFeatures: function (ids, callback, context) {\n    return this.post('deleteFeatures', {\n      objectIds: ids\n    }, function (error, response) {\n      // For compatibility reason with former deleteFeature function,\n      // we return the object in the array and not the array itself\n      var result = response && response.deleteResults ? response.deleteResults.length > 1 ? response.deleteResults : response.deleteResults[0] : undefined;\n      if (callback) {\n        callback.call(context, error || response.deleteResults[0].error, result);\n      }\n    }, context);\n  }\n});\nexport function featureLayerService(options) {\n  return new FeatureLayerService(options);\n}\nexport default featureLayerService;","map":{"version":3,"names":["Service","query","geojsonToArcGIS","FeatureLayerService","extend","options","idAttribute","addFeature","feature","callback","context","addFeatures","features","featuresArray","i","length","id","post","error","response","result","addResults","undefined","call","updateFeature","updateFeatures","updateResults","deleteFeature","deleteFeatures","ids","objectIds","deleteResults","featureLayerService"],"sources":["E:/Working/IP_proj/EcosystemCivi/ecosys/node_modules/esri-leaflet/src/Services/FeatureLayerService.js"],"sourcesContent":["import { Service } from './Service';\r\nimport query from '../Tasks/Query';\r\nimport { geojsonToArcGIS } from '../Util';\r\n\r\nexport var FeatureLayerService = Service.extend({\r\n\r\n  options: {\r\n    idAttribute: 'OBJECTID'\r\n  },\r\n\r\n  query: function () {\r\n    return query(this);\r\n  },\r\n\r\n  addFeature: function (feature, callback, context) {\r\n    this.addFeatures(feature, callback, context);\r\n  },\r\n\r\n  addFeatures: function (features, callback, context) {\r\n    var featuresArray = features.features ? features.features : [features];\r\n    for (var i = featuresArray.length - 1; i >= 0; i--) {\r\n      delete featuresArray[i].id;\r\n    }\r\n    features = geojsonToArcGIS(features);\r\n    features = featuresArray.length > 1 ? features : [features];\r\n    return this.post('addFeatures', {\r\n      features: features\r\n    }, function (error, response) {\r\n      // For compatibility reason with former addFeature function,\r\n      // we return the object in the array and not the array itself\r\n      var result = (response && response.addResults) ? response.addResults.length > 1 ? response.addResults : response.addResults[0] : undefined;\r\n      if (callback) {\r\n        callback.call(context, error || response.addResults[0].error, result);\r\n      }\r\n    }, context);\r\n  },\r\n\r\n  updateFeature: function (feature, callback, context) {\r\n    this.updateFeatures(feature, callback, context);\r\n  },\r\n\r\n  updateFeatures: function (features, callback, context) {\r\n    var featuresArray = features.features ? features.features : [features];\r\n    features = geojsonToArcGIS(features, this.options.idAttribute);\r\n    features = featuresArray.length > 1 ? features : [features];\r\n\r\n    return this.post('updateFeatures', {\r\n      features: features\r\n    }, function (error, response) {\r\n      // For compatibility reason with former updateFeature function,\r\n      // we return the object in the array and not the array itself\r\n      var result = (response && response.updateResults) ? response.updateResults.length > 1 ? response.updateResults : response.updateResults[0] : undefined;\r\n      if (callback) {\r\n        callback.call(context, error || response.updateResults[0].error, result);\r\n      }\r\n    }, context);\r\n  },\r\n\r\n  deleteFeature: function (id, callback, context) {\r\n    this.deleteFeatures(id, callback, context);\r\n  },\r\n\r\n  deleteFeatures: function (ids, callback, context) {\r\n    return this.post('deleteFeatures', {\r\n      objectIds: ids\r\n    }, function (error, response) {\r\n      // For compatibility reason with former deleteFeature function,\r\n      // we return the object in the array and not the array itself\r\n      var result = (response && response.deleteResults) ? response.deleteResults.length > 1 ? response.deleteResults : response.deleteResults[0] : undefined;\r\n      if (callback) {\r\n        callback.call(context, error || response.deleteResults[0].error, result);\r\n      }\r\n    }, context);\r\n  }\r\n});\r\n\r\nexport function featureLayerService (options) {\r\n  return new FeatureLayerService(options);\r\n}\r\n\r\nexport default featureLayerService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}