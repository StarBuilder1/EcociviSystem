{"ast":null,"code":"import _defineProperty from \"E:/Working/IP_proj/EcociviSystem/ecosys/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"leaflet/dist/leaflet.css\";\nimport $L from \"leaflet\";\nimport { DataShowMap } from \"../../../utils/map\";\nimport Global from \"../views/Globel/Global\";\nexport class AnalyzeMap extends DataShowMap {\n  constructor(...args) {\n    super(...args);\n    //Add the Austria area data\n    _defineProperty(this, \"layerGroups\", new $L.FeatureGroup().addTo(this.map));\n  }\n  //Input the Country GeoJson\n  AddGeoJson(JsonData) {\n    let myStyle = {\n      color: \"#49494b\",\n      weight: 3,\n      opacity: 0.8\n    };\n    var Json = $L.geoJSON(JsonData, {\n      style: myStyle,\n      onEachFeature: onEachFeature\n    });\n    function onEachFeature(feature, layer) {\n      layer.on({\n        click: ClickFeature\n      });\n    }\n    // function resetHighlight(e) {\n    //   Json.resetStyle(e.target);\n    //   Global.MapClickName.length = Global.MapClickName.length - 1;\n    // }\n\n    function highlightFeature(e) {\n      var layer = e.target;\n      layer.setStyle({\n        weight: 5,\n        color: \"#666\",\n        dashArray: \"\",\n        fillOpacity: 0.7\n      });\n      if (!$L.Browser.ie && !$L.Browser.opera && !$L.Browser.edge) {\n        layer.bringToFront();\n      }\n    }\n    function ClickFeature(e) {\n      //Get all the data\n      highlightFeature(e);\n      Global.MapClickData = e.target.feature.properties;\n\n      // //get the region's properties\n      // if (JudgeFunction(e.target.feature.properties.name)) {\n      //   Json.resetStyle(e.target);\n      //   Global.MapClickName.length = Global.MapClickName.length - 1;\n      // } else {\n      //   highlightFeature(e);\n      //   Global.MapClickName[Global.MapClickName.length] =\n      //     e.target.feature.properties.name;\n      //   //console.log(Global.MapClickName[Global.MapClickName.length - 1]);\n      //   //All selected results\n      //   for (let i = 0; i < Global.MapClickName.length; i++) {\n      //     console.log(Global.MapClickName[i]);\n      //   }\n      // }\n    }\n    this.layerGroups.addLayer(Json);\n\n    //Judge the area is selected or not\n    function JudgeFunction(JsonName) {\n      var state = 0;\n      for (let i = 0; i < Global.MapClickName.length; i++) {\n        if (Global.MapClickName[i] == JsonName) {\n          state = 1;\n        }\n      }\n      return state;\n    }\n  }\n\n  //remove the GeoJson\n  RemoveJson() {\n    this.layerGroups.clearLayers();\n  }\n\n  //visualize the region shapefile\n  VisualGeoJson(ResultJsonData, IndexName) {\n    let ResultJson = $L.geoJSON(ResultJsonData, {\n      style: style,\n      onEachFeature: onEachFeature\n    });\n    this.layerGroups.addLayer(ResultJson);\n    //color grading\n    function style(feature) {\n      return {\n        fillColor: getColor(ReturnAttribute(feature, IndexName)),\n        weight: 2,\n        opacity: 1,\n        color: \"white\",\n        dashArray: \"3\",\n        fillOpacity: 0.7\n      };\n    }\n    function ReturnAttribute(feature, indexName) {\n      let Data = 0;\n      for (let i = 0; i < feature.properties.Table.length; i++) {\n        if (feature.properties.Table[i].Name == indexName) {\n          Data = feature.properties.Table[i].NameData;\n        }\n      }\n      return Data;\n    }\n    function getColor(d) {\n      return d > 75 ? \"#90EE90\" : d > 50 ? \"#FFEDA0\" : d > 25 ? \"#FEB24C\" : \"#E31A1C\";\n    }\n    //点击触发事件\n    function onEachFeature(feature, layer) {\n      let data = ReturnAttribute(feature, IndexName);\n      let popupContent = feature.properties.name + IndexName + \":\" + data;\n      layer.bindPopup(popupContent);\n    }\n  }\n}","map":{"version":3,"names":["$L","DataShowMap","Global","AnalyzeMap","constructor","args","_defineProperty","FeatureGroup","addTo","map","AddGeoJson","JsonData","myStyle","color","weight","opacity","Json","geoJSON","style","onEachFeature","feature","layer","on","click","ClickFeature","highlightFeature","e","target","setStyle","dashArray","fillOpacity","Browser","ie","opera","edge","bringToFront","MapClickData","properties","layerGroups","addLayer","JudgeFunction","JsonName","state","i","MapClickName","length","RemoveJson","clearLayers","VisualGeoJson","ResultJsonData","IndexName","ResultJson","fillColor","getColor","ReturnAttribute","indexName","Data","Table","Name","NameData","d","data","popupContent","name","bindPopup"],"sources":["E:/Working/IP_proj/EcociviSystem/ecosys/src/views/EvaluateAnalyze/js/AnalyzeMap.js"],"sourcesContent":["import \"leaflet/dist/leaflet.css\";\r\nimport $L from \"leaflet\";\r\nimport { DataShowMap } from \"../../../utils/map\";\r\nimport Global from \"../views/Globel/Global\";\r\n\r\nexport class AnalyzeMap extends DataShowMap {\r\n  //Add the Austria area data\r\n  layerGroups = new $L.FeatureGroup().addTo(this.map);\r\n\r\n  //Input the Country GeoJson\r\n  AddGeoJson(JsonData) {\r\n    let myStyle = {\r\n      color: \"#49494b\",\r\n      weight: 3,\r\n      opacity: 0.8,\r\n    };\r\n\r\n    var Json = $L.geoJSON(JsonData, {\r\n      style: myStyle,\r\n      onEachFeature: onEachFeature,\r\n    });\r\n\r\n    function onEachFeature(feature, layer) {\r\n      layer.on({\r\n        click: ClickFeature,\r\n      });\r\n    }\r\n    // function resetHighlight(e) {\r\n    //   Json.resetStyle(e.target);\r\n    //   Global.MapClickName.length = Global.MapClickName.length - 1;\r\n    // }\r\n\r\n    function highlightFeature(e) {\r\n      var layer = e.target;\r\n\r\n      layer.setStyle({\r\n        weight: 5,\r\n        color: \"#666\",\r\n        dashArray: \"\",\r\n        fillOpacity: 0.7,\r\n      });\r\n\r\n      if (!$L.Browser.ie && !$L.Browser.opera && !$L.Browser.edge) {\r\n        layer.bringToFront();\r\n      }\r\n    }\r\n\r\n    function ClickFeature(e) {\r\n      //Get all the data\r\n      highlightFeature(e);\r\n      Global.MapClickData = e.target.feature.properties;\r\n\r\n      // //get the region's properties\r\n      // if (JudgeFunction(e.target.feature.properties.name)) {\r\n      //   Json.resetStyle(e.target);\r\n      //   Global.MapClickName.length = Global.MapClickName.length - 1;\r\n      // } else {\r\n      //   highlightFeature(e);\r\n      //   Global.MapClickName[Global.MapClickName.length] =\r\n      //     e.target.feature.properties.name;\r\n      //   //console.log(Global.MapClickName[Global.MapClickName.length - 1]);\r\n      //   //All selected results\r\n      //   for (let i = 0; i < Global.MapClickName.length; i++) {\r\n      //     console.log(Global.MapClickName[i]);\r\n      //   }\r\n      // }\r\n    }\r\n    this.layerGroups.addLayer(Json);\r\n\r\n    //Judge the area is selected or not\r\n    function JudgeFunction(JsonName) {\r\n      var state = 0;\r\n      for (let i = 0; i < Global.MapClickName.length; i++) {\r\n        if (Global.MapClickName[i] == JsonName) {\r\n          state = 1;\r\n        }\r\n      }\r\n      return state;\r\n    }\r\n  }\r\n\r\n  //remove the GeoJson\r\n  RemoveJson() {\r\n    this.layerGroups.clearLayers();\r\n  }\r\n\r\n  //visualize the region shapefile\r\n  VisualGeoJson(ResultJsonData, IndexName) {\r\n    let ResultJson = $L.geoJSON(ResultJsonData, {\r\n      style: style,\r\n      onEachFeature: onEachFeature,\r\n    });\r\n    this.layerGroups.addLayer(ResultJson);\r\n    //color grading\r\n    function style(feature) {\r\n      return {\r\n        fillColor: getColor(ReturnAttribute(feature, IndexName)),\r\n        weight: 2,\r\n        opacity: 1,\r\n        color: \"white\",\r\n        dashArray: \"3\",\r\n        fillOpacity: 0.7,\r\n      };\r\n    }\r\n    function ReturnAttribute(feature, indexName) {\r\n      let Data = 0;\r\n      for (let i = 0; i < feature.properties.Table.length; i++) {\r\n        if (feature.properties.Table[i].Name == indexName) {\r\n          Data = feature.properties.Table[i].NameData;\r\n        }\r\n      }\r\n      return Data;\r\n    }\r\n    function getColor(d) {\r\n      return d > 75\r\n        ? \"#90EE90\"\r\n        : d > 50\r\n        ? \"#FFEDA0\"\r\n        : d > 25\r\n        ? \"#FEB24C\"\r\n        : \"#E31A1C\";\r\n    }\r\n    //点击触发事件\r\n    function onEachFeature(feature, layer) {\r\n      let data = ReturnAttribute(feature, IndexName);\r\n      let popupContent = feature.properties.name + IndexName + \":\" + data;\r\n      layer.bindPopup(popupContent);\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}